<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANHS Digital Portal - Nikhil Chandra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --anhs-gold: #d4af37;
            --anhs-bg: #050608;
            --anhs-blue: #3b82f6;
        }
        body {
            background-color: var(--anhs-bg);
            color: #e0e0e0;
            font-family: 'Rajdhani', sans-serif;
            background-image: radial-gradient(circle at center, #11141b 0%, #050608 100%);
        }
        .orbitron { font-family: 'Orbitron', sans-serif; }
        .glass-panel {
            background: rgba(15, 17, 23, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.15);
            box-shadow: 0 10px 30px rgba(0,0,0,0.9);
        }
        .gold-glow {
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
            color: var(--anhs-gold);
        }
        .btn-elite {
            background: linear-gradient(135deg, #1a1c23, #0a0b10);
            border: 1px solid var(--anhs-gold);
            letter-spacing: 2px;
            transition: all 0.3s;
        }
        .btn-elite:hover:not(:disabled) {
            background: var(--anhs-gold);
            color: black;
            box-shadow: 0 0 15px var(--anhs-gold);
        }
        .id-badge {
            background: linear-gradient(45deg, #111, #222);
            border-left: 4px solid var(--anhs-gold);
        }
        .status-bar {
            height: 3px;
            background: rgba(255,255,255,0.05);
            width: 100%;
            position: absolute;
            top: 0; left: 0;
        }
        .status-fill {
            height: 100%;
            background: var(--anhs-gold);
            width: 0%;
            transition: width 1s linear;
        }
        /* Custom adjustment for points text to fit screen */
        .responsive-points {
            font-size: clamp(2.5rem, 10vw, 4.5rem);
            line-height: 1;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <div class="max-w-5xl mx-auto">
        <!-- Main Header -->
        <div class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-yellow-900/20 pb-6">
            <div>
                <h1 class="orbitron text-2xl md:text-3xl font-bold tracking-widest text-yellow-600">ANHS S-SYSTEM</h1>
                <p class="text-[9px] md:text-[10px] uppercase tracking-[0.4em] md:tracking-[0.6em] opacity-40">Advanced Nurturing High School // Student Interface</p>
            </div>
            <div class="text-right mt-4 md:mt-0 glass-panel px-4 md:px-6 py-2 rounded-lg">
                <div id="liveClock" class="orbitron text-lg md:text-2xl text-white font-bold">00:00:00</div>
                <div id="dateDisplay" class="text-[9px] opacity-50 font-bold uppercase tracking-widest">Sunday, Feb 08</div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8">
            
            <!-- Student Professional ID Card -->
            <div class="lg:col-span-4">
                <div class="glass-panel p-6 md:p-8 rounded-2xl relative overflow-hidden border-t-4 border-yellow-600">
                    <div class="absolute top-4 right-4 opacity-10">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="var(--anhs-gold)"><path d="M12 2L4.5 20.29L5.21 21L12 18L18.79 21L19.5 20.29L12 2Z"/></svg>
                    </div>
                    
                    <div class="mb-6">
                        <p class="text-[10px] opacity-40 uppercase tracking-widest mb-1">Authenticated Student</p>
                        <h2 class="orbitron text-2xl font-bold tracking-tight text-white uppercase">Nikhil Chandra</h2>
                        <div class="id-badge mt-2 px-3 py-1 text-[11px] font-mono text-yellow-500/80">
                            ID NO: ANHS-NC-0098
                        </div>
                    </div>

                    <div class="space-y-3 pt-4 border-t border-white/5">
                        <div class="flex justify-between items-center">
                            <span class="text-[10px] opacity-40 uppercase">Department</span>
                            <span class="text-xs font-bold uppercase">General Ed</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-[10px] opacity-40 uppercase">Current Rank</span>
                            <span id="rankLabel" class="text-[10px] font-bold tracking-widest px-2 py-0.5 border border-red-500 text-red-500">CLASS D</span>
                        </div>
                        <div class="flex justify-between items-center pt-2">
                            <span class="text-[10px] opacity-40 uppercase">System Status</span>
                            <span class="text-[10px] text-green-500 font-bold animate-pulse">‚óè SECURE_ACTIVE</span>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-yellow-600/5 rounded border border-yellow-600/10">
                        <p class="text-[10px] opacity-40 uppercase mb-2">Cycle Countdown</p>
                        <div id="countdown" class="orbitron text-lg text-yellow-500 font-bold">00h 00m 00s</div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="lg:col-span-8 space-y-6">
                
                <!-- Main Points Display (Resized to fit) -->
                <div class="glass-panel p-6 md:p-10 rounded-2xl md:rounded-3xl relative overflow-hidden">
                    <div class="status-bar"><div id="cycleProgress" class="status-fill"></div></div>
                    
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                        <div class="w-full md:w-auto">
                            <h3 class="orbitron text-[10px] opacity-40 mb-2 tracking-[0.3em]">PRIVATE POINTS BALANCE</h3>
                            <div class="flex items-baseline gap-2">
                                <span id="pointsDisplay" class="orbitron responsive-points gold-glow font-bold tracking-tighter">0</span>
                                <span class="text-lg opacity-20 font-bold">PP</span>
                            </div>
                        </div>
                        <div class="bg-white/5 p-4 md:p-6 rounded-xl md:rounded-2xl border border-white/5 w-full md:min-w-[180px]">
                            <p class="text-[9px] opacity-40 uppercase mb-1">Mobile Access</p>
                            <div id="timeRemaining" class="orbitron text-2xl md:text-3xl text-white">0h 0m</div>
                            <p class="text-[8px] opacity-30 mt-2 uppercase">Rate: 100 PP / MIN</p>
                        </div>
                    </div>
                </div>

                <!-- Action Modules -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                    <!-- Mega Test -->
                    <div class="glass-panel p-5 md:p-6 rounded-xl md:rounded-2xl">
                        <div class="flex justify-between items-center mb-4 md:mb-6">
                            <h4 class="orbitron text-[10px] text-blue-400 tracking-widest">WEEKLY MEGA TEST</h4>
                            <span id="pendingScoreDisplay" class="text-[10px] font-bold text-blue-400 bg-blue-400/10 px-2 py-1 rounded">0%</span>
                        </div>
                        <input type="number" id="megaScore" placeholder="Score %" class="w-full bg-black/50 border border-white/10 p-3 md:p-4 rounded-xl text-xl font-bold mb-4 text-center focus:border-blue-500 outline-none transition-all">
                        <button onclick="saveMegaScore()" class="btn-elite w-full py-3 md:py-4 rounded-xl font-bold uppercase text-[10px]">Register Score</button>
                    </div>

                    <!-- Usage -->
                    <div class="glass-panel p-5 md:p-6 rounded-xl md:rounded-2xl">
                        <div class="flex justify-between items-center mb-4 md:mb-6">
                            <h4 class="orbitron text-[10px] text-red-500 tracking-widest">TIME CONSUMPTION</h4>
                        </div>
                        <input type="number" id="minutesUsed" placeholder="Minutes" class="w-full bg-black/50 border border-white/10 p-3 md:p-4 rounded-xl text-xl font-bold mb-4 text-center focus:border-red-500 outline-none transition-all">
                        <button onclick="usePoints()" class="btn-elite w-full py-3 md:py-4 rounded-xl font-bold uppercase text-[10px] text-red-500/80">Authorize Usage</button>
                    </div>
                </div>

                <!-- System Logs -->
                <div class="glass-panel p-5 md:p-6 rounded-xl md:rounded-2xl">
                    <div class="flex justify-between items-center mb-3 border-b border-white/5 pb-2">
                        <h3 class="orbitron text-[9px] opacity-40 tracking-widest">TRANSACTION_HISTORY.LOG</h3>
                        <button onclick="clearLogs()" class="text-[8px] opacity-30 hover:opacity-100 uppercase">Clear</button>
                    </div>
                    <div id="logs" class="space-y-1 max-h-24 md:max-h-32 overflow-y-auto text-[10px] font-mono scrollbar-hide">
                        <!-- Logs inject here -->
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // System Configuration
        const PP_PER_MIN = 100;
        const WEEKLY_CAP = 144000;
        const REFILL_HOUR = 4; 
        const REFILL_DAY = 1; // Monday

        // Load Persisted State
        let state = JSON.parse(localStorage.getItem('anhs_nikhil_state')) || {
            points: 100000,
            pendingScore: 0,
            lastRefill: null,
            logs: []
        };

        function save() {
            localStorage.setItem('anhs_nikhil_state', JSON.stringify(state));
            updateUI();
        }

        function addLog(msg, type = 'info') {
            const time = new Date().toLocaleTimeString();
            const colors = {
                gain: 'text-green-400',
                loss: 'text-red-400',
                info: 'text-blue-400',
                sys: 'text-yellow-500 italic opacity-70'
            };
            state.logs.unshift(`<div class="flex justify-between border-b border-white/5 py-1 ${colors[type]}"><span>[${type.toUpperCase()}] ${msg}</span><span class="opacity-40">${time}</span></div>`);
            if(state.logs.length > 50) state.logs.pop();
            save();
        }

        function clearLogs() {
            state.logs = [];
            addLog("Logs cleared by Student Chandra", "sys");
        }

        function updateUI() {
            document.getElementById('pointsDisplay').innerText = Math.round(state.points).toLocaleString();
            document.getElementById('pendingScoreDisplay').innerText = state.pendingScore + "%";
            
            const totalMins = Math.max(0, state.points / PP_PER_MIN);
            const h = Math.floor(totalMins / 60);
            const m = Math.round(totalMins % 60);
            document.getElementById('timeRemaining').innerText = `${h}h ${m}m`;

            const rank = document.getElementById('rankLabel');
            if (state.points >= 120000) { 
                rank.innerText = "CLASS A"; rank.className = "text-[10px] font-bold tracking-widest px-2 py-0.5 border border-yellow-500 text-yellow-500"; 
            } else if (state.points >= 90000) { 
                rank.innerText = "CLASS B"; rank.className = "text-[10px] font-bold tracking-widest px-2 py-0.5 border border-blue-400 text-blue-400";
            } else if (state.points >= 60000) { 
                rank.innerText = "CLASS C"; rank.className = "text-[10px] font-bold tracking-widest px-2 py-0.5 border border-green-500 text-green-500";
            } else { 
                rank.innerText = "CLASS D"; rank.className = "text-[10px] font-bold tracking-widest px-2 py-0.5 border border-red-500 text-red-500";
            }

            document.getElementById('logs').innerHTML = state.logs.join('');
        }

        function getNextRefillTime() {
            const now = new Date();
            let next = new Date();
            next.setDate(now.getDate() + (REFILL_DAY + 7 - now.getDay()) % 7);
            next.setHours(REFILL_HOUR, 0, 0, 0);
            if (now >= next) next.setDate(next.getDate() + 7);
            return next;
        }

        function timerTick() {
            const now = new Date();
            const next = getNextRefillTime();
            const diff = next - now;

            const h = Math.floor(diff / (1000 * 60 * 60));
            const m = Math.floor((diff / (1000 * 60)) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById('countdown').innerText = 
                `${h.toString().padStart(2,'0')}h ${m.toString().padStart(2,'0')}m ${s.toString().padStart(2,'0')}s`;

            const totalCycle = 7 * 24 * 60 * 60 * 1000;
            const progress = ((totalCycle - diff) / totalCycle) * 100;
            document.getElementById('cycleProgress').style.width = progress + "%";

            const currentMonday4AM = new Date();
            currentMonday4AM.setDate(now.getDate() - (now.getDay() - REFILL_DAY + 7) % 7);
            currentMonday4AM.setHours(REFILL_HOUR, 0, 0, 0);

            const lastRefillDate = state.lastRefill ? new Date(state.lastRefill) : null;
            if (now >= currentMonday4AM && (!lastRefillDate || lastRefillDate < currentMonday4AM)) {
                const earned = (state.pendingScore / 100) * WEEKLY_CAP;
                state.points += earned;
                state.lastRefill = currentMonday4AM.toISOString();
                addLog(`WEEKLY REFILL: +${Math.round(earned).toLocaleString()} PP (Score: ${state.pendingScore}%)`, 'gain');
                state.pendingScore = 0;
                save();
            }

            document.getElementById('liveClock').innerText = now.toTimeString().split(' ')[0];
            document.getElementById('dateDisplay').innerText = now.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
        }

        function saveMegaScore() {
            const val = parseFloat(document.getElementById('megaScore').value);
            if (isNaN(val) || val < 0 || val > 100) return;
            state.pendingScore = val;
            addLog(`Mega Test Saved: ${val}%`, 'info');
            document.getElementById('megaScore').value = '';
            save();
        }

        function usePoints() {
            const mins = parseFloat(document.getElementById('minutesUsed').value);
            if (isNaN(mins) || mins <= 0) return;
            const cost = mins * PP_PER_MIN;
            state.points -= cost;
            addLog(`Usage auth: -${cost.toLocaleString()} PP (${mins} min)`, 'loss');
            document.getElementById('minutesUsed').value = '';
            save();
        }

        // Initial Boot
        if(state.logs.length === 0) addLog("System ready. Welcome Nikhil Chandra.", "sys");
        setInterval(timerTick, 1000);
        timerTick();
        updateUI();
    </script>
</body>
</html>

